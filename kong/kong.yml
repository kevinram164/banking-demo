_format_version: "3.0"
_transform: true

services:
  - name: auth-service
    url: http://auth-service:8001
    routes:
      - name: auth-register-route
        paths:
          - /api/auth/register
        strip_path: true
      - name: auth-login-route
        paths:
          - /api/auth/login
        strip_path: true
    plugins:
      - name: cors
        config:
          origins:
            - http://localhost:3000
          credentials: true
          methods:
            - GET
            - POST
            - PUT
            - DELETE
            - OPTIONS
          headers:
            - Accept
            - Accept-Version
            - Content-Length
            - Content-MD5
            - Content-Type
            - Date
            - X-Session

  - name: account-service
    url: http://account-service:8002
    routes:
      - name: account-me-route
        paths:
          - /api/account/me
        strip_path: true
      - name: account-balance-route
        paths:
          - /api/account/balance
        strip_path: true
    plugins:
      - name: cors
        config:
          origins:
            - http://localhost:3000
          credentials: true
          methods:
            - GET
            - POST
            - PUT
            - DELETE
            - OPTIONS
          headers:
            - Accept
            - Accept-Version
            - Content-Length
            - Content-MD5
            - Content-Type
            - Date
            - X-Session

  - name: transfer-service
    url: http://transfer-service:8003
    routes:
      - name: transfer-route
        paths:
          - /api/transfer/transfer
        strip_path: true
    plugins:
      - name: cors
        config:
          origins:
            - http://localhost:3000
          credentials: true
          methods:
            - GET
            - POST
            - PUT
            - DELETE
            - OPTIONS
          headers:
            - Accept
            - Accept-Version
            - Content-Length
            - Content-MD5
            - Content-Type
            - Date
            - X-Session

  - name: notification-service
    url: http://notification-service:8004
    routes:
      - name: notification-route
        paths:
          - /api/notifications/notifications
        strip_path: true
      - name: notification-ws-route
        paths:
          - /ws
        protocols:
          - http
          - https
    plugins:
      - name: cors
        config:
          origins:
            - http://localhost:3000
          credentials: true
          methods:
            - GET
            - POST
            - PUT
            - DELETE
            - OPTIONS
          headers:
            - Accept
            - Accept-Version
            - Content-Length
            - Content-MD5
            - Content-Type
            - Date
            - X-Session

<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36" version="29.3.6">
  <diagram name="Phase 3 - Luồng đi" id="phase3-flow">
    <mxGraphModel dx="1042" dy="535" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1200" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="lbl1" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontStyle=1;fontSize=12;" value="1. Luồng request (k6 → services)" vertex="1">
          <mxGeometry height="24" width="280" x="40" y="20" as="geometry" />
        </mxCell>
        <mxCell id="k6" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" value="k6&#xa;Load Test" vertex="1">
          <mxGeometry height="50" width="100" x="40" y="55" as="geometry" />
        </mxCell>
        <mxCell id="ingress" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" value="Ingress&#xa;HAProxy" vertex="1">
          <mxGeometry height="50" width="90" x="180" y="55" as="geometry" />
        </mxCell>
        <mxCell id="kong" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" value="Kong" vertex="1">
          <mxGeometry height="50" width="80" x="310" y="55" as="geometry" />
        </mxCell>
        <mxCell id="y4b-aP0Rb6aYF52h2N46-2" edge="1" parent="1" source="services" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="otel" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="services" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" value="auth · account ·&#xa;transfer · notification" vertex="1">
          <mxGeometry height="64" width="160" x="430" y="48" as="geometry" />
        </mxCell>
        <mxCell id="lbl2" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontStyle=1;fontSize=12;" value="2. Observability" vertex="1">
          <mxGeometry height="24" width="160" x="40" y="155" as="geometry" />
        </mxCell>
        <mxCell id="prom" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" value="Prometheus" vertex="1">
          <mxGeometry height="44" width="110" x="60" y="195" as="geometry" />
        </mxCell>
        <mxCell id="keda" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" value="KEDA&#xa;ScaledObjects" vertex="1">
          <mxGeometry height="50" width="110" x="60" y="265" as="geometry" />
        </mxCell>
        <mxCell id="promtail" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" value="Promtail" vertex="1">
          <mxGeometry height="44" width="90" x="305" y="198" as="geometry" />
        </mxCell>
        <mxCell id="loki" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" value="Loki" vertex="1">
          <mxGeometry height="44" width="90" x="305" y="265" as="geometry" />
        </mxCell>
        <mxCell id="otel" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" value="OTEL&#xa;Collector" vertex="1">
          <mxGeometry height="50" width="100" x="460" y="192" as="geometry" />
        </mxCell>
        <mxCell id="tempo" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" value="Tempo" vertex="1">
          <mxGeometry height="44" width="100" x="460" y="268" as="geometry" />
        </mxCell>
        <mxCell id="lbl3" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontStyle=1;fontSize=12;" value="3. Visualization" vertex="1">
          <mxGeometry height="24" width="140" x="40" y="355" as="geometry" />
        </mxCell>
        <mxCell id="grafana" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=1" value="Grafana&#xa;(Prometheus · Loki · Tempo)" vertex="1">
          <mxGeometry height="50" width="240" x="230" y="390" as="geometry" />
        </mxCell>
        <mxCell id="e1" edge="1" parent="1" source="k6" target="ingress" value="HTTP">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e2" edge="1" parent="1" source="ingress" target="kong">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e3" edge="1" parent="1" source="kong" target="services">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e4" edge="1" parent="1" source="services" target="prom" value="scrape /metrics">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e5" edge="1" parent="1" source="prom" target="keda" value="rate(...)">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e6" edge="1" parent="1" source="keda" style="dashed=1" target="services" value="scale">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e7" edge="1" parent="1" source="services" target="promtail" value="log">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e8" edge="1" parent="1" source="promtail" target="loki">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e9" edge="1" parent="1" source="services" style="orthogonalLoop=0;dashed=1;noJump=0;movable=1;enumerate=0;" target="otel" value="OTLP">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e10" edge="1" parent="1" source="otel" target="tempo">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e11" edge="1" parent="1" source="prom" target="grafana" value="query">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e12" edge="1" parent="1" source="loki" target="grafana" value="query">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e13" edge="1" parent="1" source="tempo" target="grafana" value="query">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
